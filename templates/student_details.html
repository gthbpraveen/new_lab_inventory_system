{% extends "login_home.html" %}
{% block title %}Student Details - {{ student.name }}{% endblock %}

{% block content %}
<section class="bg-white py-10">
  <div class="max-w-4xl mx-auto px-6 ">
    <div class="border border-gray-300 rounded-xl p-8 shadow bg-yellow-50">

      <h2 class="text-2xl font-bold text-blue-800 mb-6 border-b pb-2 text-center">Student & Workstation Details</h2>

      <!-- Profile Photo and Basic Info -->
      <div class="flex flex-col md:flex-row items-center md:items-start mb-6">
        <div class="md:w-1/3 w-full flex justify-center mb-4 md:mb-0">
          <img src="{{ student.photo_url or '/static/images/passport.png' }}"
               alt="Student Photo"
               class="w-40 h-57 object-cover rounded-lg border border-gray-300 shadow">
        </div>
        <div class="md:w-2/3 w-full md:pl-6">
          <table class="w-full table-fixed border border-green-700 text-sm">
            <tbody>
              <tr><td class="w-1/2 border px-4 py-2 bg-gray-100">Name</td><td class="border px-4 py-2">{{ student.name }}</td></tr>
              <tr><td class="border px-4 py-2 bg-gray-100">Roll Number</td><td class="border px-4 py-2">{{ student.roll }}</td></tr>
              <tr><td class="border px-4 py-2 bg-gray-100">Course</td><td class="border px-4 py-2">{{ student.course }}</td></tr>
              <tr><td class="border px-4 py-2 bg-gray-100">Year</td><td class="border px-4 py-2">{{ student.year }}</td></tr>
              <tr><td class="border px-4 py-2 bg-gray-100">Email</td><td class="border px-4 py-2">{{ student.email }}</td></tr>
              <tr><td class="border px-4 py-2 bg-gray-100">Phone</td><td class="border px-4 py-2">{{ student.phone }}</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Lab & System Details</h2>
      <table class="w-full table-fixed border border-gray-300 text-sm mb-6">
        <tbody>
          <tr><td class="w-1/2 border px-4 py-2 bg-gray-100">Lab</td><td class="border px-4 py-2">{{ student.room_lab_name }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Cubicle No</td><td class="border px-4 py-2">{{ student.cubicle_no }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Faculty In-Charge</td><td class="border px-4 py-2">{{ student.faculty }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Staff In-Charge</td><td class="border px-4 py-2">{{ student.staff_incharge }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Manufacturer</td><td class="border px-4 py-2">{{ student.manufacturer or student.otherManufacturer }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Model</td><td class="border px-4 py-2">{{ student.model }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Serial No</td><td class="border px-4 py-2">{{ student.serial }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">OS</td><td class="border px-4 py-2">{{ student.os or student.otherOs }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Processor</td><td class="border px-4 py-2">{{ student.processor }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Cores</td><td class="border px-4 py-2">{{ student.cores }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">RAM</td><td class="border px-4 py-2">{{ student.ram or student.otherRam }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">GPU</td><td class="border px-4 py-2">{{ student.gpu }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">VRAM</td><td class="border px-4 py-2">{{ student.vram }}</td></tr>
        </tbody>
      </table>

      <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Storage</h2>
      <table class="w-full table-fixed border border-gray-300 text-sm mb-6">
        <tbody>
          <tr><td class="w-1/2 border px-4 py-2 bg-gray-100">Storage 1</td><td class="border px-4 py-2">{{ student.storage_type1 }} - {{ student.storage_capacity1 }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Storage 2</td><td class="border px-4 py-2">{{ student.storage_type2 }} - {{ student.storage_capacity2 }}</td></tr>
        </tbody>
      </table>

      <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Peripherals</h2>
      <table class="w-full table-fixed border border-gray-300 text-sm mb-6">
        <tbody>
          <tr><td class="w-1/2 border px-4 py-2 bg-gray-100">Monitor Provided</td><td class="border px-4 py-2">{{ student.monitor_provided }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Monitor Serial</td><td class="border px-4 py-2">{{ student.monitor_serial }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Keyboard Provided</td><td class="border px-4 py-2">{{ student.keyboard_provided }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Mouse Provided</td><td class="border px-4 py-2">{{ student.mouse_provided }}</td></tr>
        </tbody>
      </table>

      <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Purchase & Usage Info</h2>
      <table class="w-full table-fixed border border-gray-300 text-sm mb-6">
        <tbody>
          <tr><td class="w-1/2 border px-4 py-2 bg-gray-100">Issue Date</td><td class="border px-4 py-2">{{ student.issue_date }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Required Till</td><td class="border px-4 py-2">{{ student.system_required_till }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">PO Date</td><td class="border px-4 py-2">{{ student.po_date }}</td></tr>
          <tr><td class="border px-4 py-2 bg-gray-100">Funding Source</td><td class="border px-4 py-2">{{ student.source_of_fund }}</td></tr>
        </tbody>
      </table>

      <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 text-center">Assigned Equipment</h2>
      <table class="w-full text-sm border border-gray-300 mb-6">
        <thead class="bg-gray-100">
          <tr>
            <th class="border px-4 py-2">Name</th>
            <th class="border px-4 py-2">Category</th>
             <th class="border px-4 py-2">Serial No</th>
            <th class="border px-4 py-2">Assigned On</th>
            <th class="border px-4 py-2">Assigned By</th>
          </tr>
        </thead>
        <tbody>
          {% for eq in assigned_equipment %}
          <tr>
            <td class="border px-4 py-2">{{ eq.name }}</td>
            <td class="border px-4 py-2">{{ eq.category }}</td>
            <td class="border px-4 py-2">{{ eq.serial_number }}</td>
            <td class="border px-4 py-2">{{ eq.assigned_date.strftime('%d-%b-%Y %H:%M') if eq.assigned_date else '—' }}</td>
            <td class="border px-4 py-2">{{ eq.assigned_by or '—' }}</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="border px-4 py-3 text-center text-gray-500">No equipment assigned.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Back and PDF Buttons -->
      <div class="flex justify-between items-center mt-8">
        <a href="/lab_details/{{ student.room_lab_name }}" class="text-sm text-indigo-700 hover:underline">← Back to Lab</a>
        <a href="{{ url_for('generate_equipment_pdf', student_id=student.id) }}" target="_blank" class="text-sm text-red-600 hover:underline">Download PDF</a>
      </div>

    </div>
  </div>
</section>
{% endblock %}